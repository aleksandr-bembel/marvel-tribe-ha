# –ü—Ä–∏–º–µ—Ä—ã —Å–∫—Ä–∏–ø—Ç–æ–≤ –¥–ª—è Marvel Tribe
# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –Ω—É–∂–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã –≤ –≤–∞—à —Ñ–∞–π–ª scripts.yaml

# –ë—ã—Å—Ç—Ä–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ RGB
setup_rgb_evening:
  alias: "Marvel Tribe - –í–µ—á–µ—Ä–Ω—è—è RGB"
  description: "–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç RGB –¥–ª—è –≤–µ—á–µ—Ä–Ω–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏"
  sequence:
    - service: switch.turn_on
      entity_id: switch.marvel_tribe_rgb_light
    - service: select.select_option
      entity_id: select.marvel_tribe_rgb_effect
      data:
        option: "Breath"
    - service: number.set_value
      entity_id: number.marvel_tribe_rgb_brightness
      data:
        value: 40
    - service: notify.persistent_notification
      data:
        message: "–í–µ—á–µ—Ä–Ω—è—è RGB –ø–æ–¥—Å–≤–µ—Ç–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞"
        title: "Marvel Tribe"

# –ü–æ–ª–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
device_diagnostics:
  alias: "Marvel Tribe - –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞"
  description: "–í—ã–ø–æ–ª–Ω—è–µ—Ç –ø–æ–ª–Ω—É—é –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞"
  sequence:
    - service: notify.persistent_notification
      data:
        message: "–ù–∞—á–∏–Ω–∞–µ—Ç—Å—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ Marvel Tribe..."
        title: "Marvel Tribe - –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞"
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
    - condition: state
      entity_id: binary_sensor.marvel_tribe_connected
      state: "on"
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –æ—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç–∞—Ç—É—Å—ã
    - delay: "00:00:02"
    
    # –£–≤–µ–¥–æ–º–ª—è–µ–º –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏
    - service: notify.persistent_notification
      data:
        message: |
          –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ Marvel Tribe:
          
          –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ: {{ states('binary_sensor.marvel_tribe_connected') }}
          WiFi: {{ states('binary_sensor.marvel_tribe_wifi_connected') }} ({{ states('sensor.marvel_tribe_wifi_ssid') }})
          RGB: {{ '–í–∫–ª—é—á–µ–Ω–∞' if is_state('binary_sensor.marvel_tribe_rgb_enabled', 'on') else '–í—ã–∫–ª—é—á–µ–Ω–∞' }}
          –ê—É–¥–∏–æ: {{ '–í–∫–ª—é—á–µ–Ω–æ' if is_state('binary_sensor.marvel_tribe_audio_enabled', 'on') else '–í—ã–∫–ª—é—á–µ–Ω–æ' }}
          Auto-Sleep: {{ '–ê–∫—Ç–∏–≤–µ–Ω' if is_state('binary_sensor.marvel_tribe_auto_sleep_active', 'on') else '–ù–µ–∞–∫—Ç–∏–≤–µ–Ω' }}
          –ë—É–¥–∏–ª—å–Ω–∏–∫–∏: {{ states('sensor.marvel_tribe_active_alarms') }}/6 –∞–∫—Ç–∏–≤–Ω—ã—Ö
          –ü—Ä–æ—à–∏–≤–∫–∞: {{ states('sensor.marvel_tribe_firmware_version') }}
        title: "Marvel Tribe - –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞"

# –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–≤—Ç–æ—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π –≤—Ä–µ–º–µ–Ω–∏
enable_auto_sync:
  alias: "Marvel Tribe - –í–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é"
  description: "–í–∫–ª—é—á–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é –≤—Ä–µ–º–µ–Ω–∏"
  sequence:
    - service: switch.turn_on
      entity_id: switch.marvel_tribe_auto_sync_time
    - service: notify.persistent_notification
      data:
        message: "–ê–≤—Ç–æ—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤—Ä–µ–º–µ–Ω–∏ –≤–∫–ª—é—á–µ–Ω–∞ ‚è∞"
        title: "Marvel Tribe"

disable_auto_sync:
  alias: "Marvel Tribe - –í—ã–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é"
  description: "–í—ã–∫–ª—é—á–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é –≤—Ä–µ–º–µ–Ω–∏"
  sequence:
    - service: switch.turn_off
      entity_id: switch.marvel_tribe_auto_sync_time
    - service: notify.persistent_notification
      data:
        message: "–ê–≤—Ç–æ—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–∫–ª—é—á–µ–Ω–∞"
        title: "Marvel Tribe"

setup_night_mode:
  alias: "Marvel Tribe - –ù–æ—á–Ω–æ–π —Ä–µ–∂–∏–º"
  description: "–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç —á–∞—Å—ã –¥–ª—è –Ω–æ—á–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏"
  sequence:
    - service: switch.turn_on
      entity_id: switch.marvel_tribe_auto_sleep
    - service: number.set_value
      entity_id: number.marvel_tribe_lcd_brightness
      data:
        value: 10
    - service: switch.turn_off
      entity_id: switch.marvel_tribe_rgb_light
    - service: notify.persistent_notification
      data:
        message: "–ù–æ—á–Ω–æ–π —Ä–µ–∂–∏–º –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω üåô"
        title: "Marvel Tribe"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ —Å—Ç–∞—Ç—É—Å–∞
system_status_check:
  alias: "Marvel Tribe - –°–∏—Å—Ç–µ–º–Ω—ã–π —Å—Ç–∞—Ç—É—Å"
  description: "–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –æ–±—â–∏–π —Å—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã —á–∞—Å–æ–≤"
  sequence:
    - service: notify.persistent_notification
      data:
        message: |
          –°–∏—Å—Ç–µ–º–Ω—ã–π —Å—Ç–∞—Ç—É—Å Marvel Tribe:
          
          –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ: {{ '–ê–∫—Ç–∏–≤–Ω–æ' if is_state('binary_sensor.marvel_tribe_connected', 'on') else '–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç' }}
          WiFi: {{ states('sensor.marvel_tribe_wifi_ssid') }}
          RGB: {{ states('select.marvel_tribe_rgb_effect') }} ({{ states('number.marvel_tribe_rgb_brightness') }}%)
          LCD: {{ states('number.marvel_tribe_lcd_brightness') }}%
          Auto-Sleep: {{ states('sensor.marvel_tribe_auto_sleep_period') }}
          –ë—É–¥–∏–ª—å–Ω–∏–∫–∏: {{ states('sensor.marvel_tribe_active_alarms') }} –∞–∫—Ç–∏–≤–Ω—ã—Ö
        title: "Marvel Tribe - –°—Ç–∞—Ç—É—Å"

# –ü–æ–ª–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
setup_device:
  alias: "Marvel Tribe - –ü–æ–ª–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞"
  description: "–í—ã–ø–æ–ª–Ω—è–µ—Ç –ø–æ–ª–Ω—É—é –Ω–∞—Å—Ç—Ä–æ–π–∫—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞"
  sequence:
    - service: switch.turn_on
      entity_id: switch.marvel_tribe_auto_sync_time
    - service: switch.turn_on
      entity_id: switch.marvel_tribe_rgb_light
    - service: select.select_option
      entity_id: select.marvel_tribe_rgb_effect
      data:
        option: "Flow"
    - service: number.set_value
      entity_id: number.marvel_tribe_rgb_brightness
      data:
        value: 50
    - service: number.set_value
      entity_id: number.marvel_tribe_lcd_brightness
      data:
        value: 70
    - service: notify.persistent_notification
      data:
        message: "–ü–æ–ª–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞! ‚úÖ"
        title: "Marvel Tribe"
